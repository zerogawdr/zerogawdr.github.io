(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72fe9dc5"],{"4ad0":function(e,t,a){"use strict";var n=a("62e7"),o=a.n(n);o.a},"54da":function(e,t,a){"use strict";var n=a("8f8e"),o=a.n(n);o.a},"62e7":function(e,t,a){},"8c8d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticStyle:{"margin-top":"20px"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"è¯·è¾“å…¥å…³é”®å­—æŒ‰å›è½¦æˆ–è€…ç‚¹å‡»æœç´¢æŸ¥è¯¢",search:e.search,suffix:"ios-search"},on:{"on-search":e.searchRoleName},model:{value:e.paginations.username,callback:function(t){e.$set(e.paginations,"username",t)},expression:"paginations.username"}}),a("Button",{staticStyle:{"margin-left":"20px","margin-right":"10px"},attrs:{type:"success"},on:{click:e.handleAdd}},[e._v("æ–°å¢è§’è‰²")]),a("Button",{on:{click:e.deletTableColum}},[e._v("æ‰¹é‡åˆ é™¤")])],1),a("Row",{staticStyle:{"margin-top":"20px"}},[a("Table",{ref:"selection",attrs:{"highlight-row":e.hove,columns:e.columns1,loading:e.tableLoading,data:e.userTable,"max-height":"600",height:"550"},on:{"on-selection-change":function(t){return e.chekedList=t}}})],1),a("Row",[a("div",{staticClass:"selectStatus"},[a("i-button",{staticStyle:{"margin-right":"10px"},on:{click:e.handleSelectAll}},[e._v("å…¨é€‰")])],1),a("Page",{staticClass:"userTablePage",attrs:{total:e.totalCount,current:e.paginations.page,"page-size":e.paginations.limit,"page-size-opts":e.pageSizeOpts,"show-elevator":"","show-sizer":""},on:{"update:current":function(t){return e.$set(e.paginations,"page",t)},"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1),a("roleModal",{attrs:{formData:e.formData,dialog:e.dialog},on:{add:function(t){return e.getRoleList()},update:function(t){return e.getRoleList()}}})],1)},o=[],i=(a("96cf"),a("3b8d")),r=a("bd86"),s=a("35b5"),l=a("c1fb");function c(e){return l["a"].post("/sys/role/delete",e)}var u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[a("Modal",{attrs:{title:e.dialog.option+e.dialog.title,loading:e.loading},on:{"on-ok":function(t){return e.ok("form")},"on-cancel":e.cancel,"on-visible-change":e.changeVisible},model:{value:e.dialog.value,callback:function(t){e.$set(e.dialog,"value",t)},expression:"dialog.value"}},[a("div",{staticClass:"form"},[a("Form",{ref:"form",attrs:{"label-width":70,model:e.formData,"label-position":"right",rules:e.form_rules}},[a("FormItem",{attrs:{prop:"roleName",label:"è§’è‰²åç§°"}},[a("Input",{model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}})],1),a("FormItem",{attrs:{label:"å¤‡æ³¨"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("FormItem",{attrs:{label:"æˆæƒ"}},[a("Tree",{attrs:{data:e.menuList,"show-checkbox":"",multiple:""},on:{"on-check-change":e.checked}})],1)],1)],1)])],1)},d=[],g=a("cebc");function m(e){return l["a"].post("/sys/role/save",e)}function h(e){return l["a"].post("/sys/role/update",e)}var f=a("2f62"),p=Object(f["a"])("menuList"),b={props:{dialog:Object,formData:Object},data:function(){return{loading:!0,form_rules:{roleName:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{type:"string",min:3,max:8,message:"ç”¨æˆ·åä¸º4-8ä¸ªå­—ç¬¦",trigger:"blur"}]}}},methods:{ok:function(e){var t=this;setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},300),this.$refs[e].validate(function(e){var a=t.dialog.option;e&&("æ·»åŠ "==a?(console.log(t.formData),m(t.formData).then(function(e){var n=e.data,o=n.code,i=n.msg;0===o?(t.$Message.success("æ•°æ®".concat(a,"æˆåŠŸğŸ˜„")),t.dialog.value=!1,t.$emit("add")):(t.$Message.error(i),t.dialog.value=!1)})):"ä¿®æ”¹"==a&&h(t.formData).then(function(e){var n=e.data,o=n.code,i=n.msg;0===o?(t.$Message.success("æ•°æ®".concat(a,"æˆåŠŸğŸ˜„")),t.$emit("update"),t.dialog.value=!1):(t.$Message.error(i),t.dialog.value=!1)}))})},changeVisible:function(e){e||this.$refs["form"].resetFields()},cancel:function(){this.formData.remark=""},checked:function(e){var t=e.map(function(e){return e.menuId});this.formData.menuIdList=t}},computed:Object(g["a"])({},p.mapGetters(["menuList"])),mounted:function(){console.log(this.menuList)}},v=b,k=(a("4ad0"),a("2877")),x=Object(k["a"])(v,u,d,!1,null,"0926c577",null),$=x.exports,y={data:function(){var e,t=this;return e={formData:{roleId:0,roleName:"",remark:"",menuIdList:[]},dialog:{value:!1,title:"",option:""},paginations:{page:1,limit:10,sidx:"",order:"asc",rolename:""},userTable:[],columns1:[{type:"selection",width:50,minWidth:100},{title:"id",key:"roleId",align:"center",sortable:!0,minWidth:100},{title:"è§’è‰²åç§°",key:"roleName",align:"center",sortable:!0,minWidth:100},{title:"å¤‡æ³¨",key:"remark",align:"center",minWidth:100},{title:"åˆ›å»ºæ—¶é—´",key:"createTime",sortable:!0,minWidth:100,align:"center"},{title:"æ“ä½œ",align:"center",fixed:"right",width:150,minWidth:100,render:function(e,a){return e("div",[e("Button",{props:{size:"small",type:"text"},on:{click:function(){t.editRole(a)}},style:{marginRight:"5px",color:"#39d639e8"}},"ç¼–è¾‘"),e("Button",{props:{size:"small",type:"text"},style:{color:"#39d639e8"},on:{click:function(){t.deletOneRole(a)}}},"åˆ é™¤")])}}]},Object(r["a"])(e,"paginations",{page:1,limit:10,sidx:"",order:"desc",roleName:""}),Object(r["a"])(e,"totalCount",0),Object(r["a"])(e,"totalPage",1),Object(r["a"])(e,"pageSizeOpts",[10,15,20,25]),Object(r["a"])(e,"hove",!0),Object(r["a"])(e,"tableLoading",!1),Object(r["a"])(e,"search",!0),Object(r["a"])(e,"SelectAll",!1),Object(r["a"])(e,"chekedList",[]),e},components:{roleModal:$},methods:{getRoleList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,o,i,r,l,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tableLoading=!0,e.next=3,Object(s["a"])(this.paginations);case 3:t=e.sent,a=t.data,n=a.code,o=a.msg,i=a.page,0==n?(r=i.list,l=i.pageSize,c=i.totalCount,u=i.totalPage,d=i.currPage,this.userTable=r,this.paginations.limit=l,this.totalPage=u,this.totalCount=c,this.paginations.page=d):500==n&&this.message.error(o),this.tableLoading=!1;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),editRole:function(e){this.dialog={value:!0,title:"è§’è‰²",option:"ä¿®æ”¹"};var t=e.row,a=t.roleId,n=t.roleName,o=t.remark;this.formData.roleId=a,this.formData.roleName=n,this.formData.remark=o},deletOneRole:function(e){var t=this;console.log(e);var a=e.row,n=a.roleName,o=a.roleId;this.$Modal.confirm({title:"æç¤º",content:"æ‚¨æ­£åœ¨åˆ é™¤ç”¨æˆ·<span style='color:#42be19'>".concat(n,"</span>,æ˜¯å¦ç¡®å®šè¦åˆ é™¤ğŸ˜"),loading:!0,onOk:function(){c([o]).then(function(e){var a=e.data;0===a.code?(t.$Message.success({content:"ç”¨æˆ·<span style='color:#42be19'>".concat(n,"</span>å·²åˆ é™¤")}),t.getRoleList()):t.$Message.error({content:"ç”¨æˆ·<span style='color:red'>".concat(n,"</span>åˆ é™¤å¤±è´¥")})}),t.$Modal.remove()}})},handleCurrentChange:function(){this.getRoleList()},handleSizeChange:function(e){this.paginations.limit=e,this.getRoleList()},handleSelectAll:function(){this.$refs.selection.selectAll(this.SelectAll=!this.SelectAll),console.log(this.chekedList)},deletTableColum:function(){var e=this,t=this.chekedList.map(function(e){return e.roleId});if(0===t.length)return this.$Modal.error({title:"æ— æ•ˆçš„æ“ä½œ",content:"è¯·é€‰æ‹©è¦åˆ é™¤çš„å¯¹è±¡"});this.$Modal.confirm({title:"å‹æƒ…æç¤º",content:"æ‚¨æ­£åœ¨å¯¹æ•°æ®è¿›è¡Œæ‰¹é‡åˆ é™¤,æ˜¯å¦è¦ç»§ç»­æ“ä½œï¼Ÿâ—” â€¸â—”?",loading:!0,cancelText:"ç‚¹é”™äº†",onOk:function(){c(t).then(function(t){var a=t.data;console.log(a),0===a.code?(e.$Message.success({content:"æ‰¹é‡åˆ é™¤æˆåŠŸå•¦"}),e.getRoleList()):e.$Message.error(a.msg),e.chekedList=[]}),e.$Modal.remove()}})},searchRoleName:function(e){this.paginations.roleName=e,this.getRoleList()},handleAdd:function(){this.dialog={value:!0,title:"è§’è‰²",option:"æ·»åŠ "}}},created:function(){this.getRoleList()}},L=y,O=(a("54da"),Object(k["a"])(L,n,o,!1,null,"e0ea6746",null));t["default"]=O.exports},"8f8e":function(e,t,a){}}]);
//# sourceMappingURL=chunk-72fe9dc5.62f1ed61.js.map